import unittestimport sysimport osimport propertiesimport shutilfrom utils import resultsimport datetime#RESULT_DATE_FORMAT = "%m%d%Y_%H_%M"RESULT_BUILD_NUMBER = os.environ['BUILD_NUMBER']def run_suite():    #resultdir = properties.Results    curdir = os.getcwd()    suitefile = os.path.join(curdir, 'suite.conf')    suites = []    if os.path.exists(suitefile):        fh = open(suitefile, 'r')        for line in fh:            if " " not in line and "#" not in line:                print line                line = line.replace("\n", "")                line = line.replace("\t", "")                line = line.replace("\r", "")                line = line.replace(" ", "")                line = line.lower()                suites.append(line)    configfiles = [0] * (len(suites))    for dirname, dirs, files in os.walk(curdir):        for file in files:            if 'config.ini' in file:                suitepath = os.path.split(dirname)                suitename = suitepath[1]                suitename = suitename.lower()                if suitename in suites:                    index = suites.index(suitename)                    configpath = os.path.join(dirname, file)                    configfiles.pop(index)                    configfiles.insert(index, configpath)    #resultlocation = os.path.join(resultdir,'html_result')    #coverageresults = os.path.join(resultdir,'html_coverage_result')    #if os.path.exists(resultlocation):    #    shutil.rmtree(resultlocation, ignore_errors='true')    #if os.path.exists(coverageresults):    #    shutil.rmtree(coverageresults, ignore_errors='true')    #current_name = datetime.datetime.now().strftime(RESULT_DATE_FORMAT)    current_name = RESULT_BUILD_NUMBER    resultpath = properties.Results    resultdir = os.path.join(resultpath, current_name)            if not os.path.exists(resultdir):        os.makedirs(resultdir)        #put this path to tmp file which will be used by individual test cases    #to put their result under it    result_file = os.path.join(resultpath, 'result_path.txt')    f = open(result_file, 'w')    f.write(resultdir)    f.close()    for each in configfiles:        sourcedir = os.path.dirname(each)        os.chdir(sourcedir)        #sourcedir1 = os.path.split(sourcedir)        #sourcedir = os.path.join(os.path.dirname(each),"htmlcov")        #destidir = os.path.join(coverageresults,sourcedir1[1])        command = ("nosetests -c %s" % each)        print command        os.system(command)       # if os.path.exists(sourcedir):       #     shutil.move(sourcedir,destidir)    os.chdir(curdir)    results.write_main_index()run_suite()